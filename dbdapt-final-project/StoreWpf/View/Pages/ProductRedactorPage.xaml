<Page x:Class="StoreWpf.View.Pages.ProductRedactorPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      xmlns:local="clr-namespace:StoreWpf.View.Pages" xmlns:viewmodel="clr-namespace:StoreWpf.ViewModel" d:DataContext="{d:DesignInstance Type=viewmodel:ProductRedactorPageViewModel}"
      mc:Ignorable="d" 
      d:DesignHeight="450" d:DesignWidth="800"
      Title="ProductRedactorPage" 
      Loaded="ProductRedactorPage_Loaded" 
      FontFamily="Times New Roman">

    <ScrollViewer VerticalScrollBarVisibility="Auto" 
                  HorizontalScrollBarVisibility="Auto">
        <StackPanel VerticalAlignment="Center"
                HorizontalAlignment="Center"
                Width="400">
            <TextBlock Text="Редактирование" FontSize="24"/>
            <TextBlock Text="Артикул"/>
            <!--Здесь привязка выполняется к свойству объекта (из ViewModel)-->
            <TextBox Text="{Binding Product.ProductCode}"
                 />
            <TextBlock Text="Название"/>
            <TextBox Text="{Binding Product.ProductName}"/>
            <TextBlock Text="Описание"/>
            <TextBox Text="{Binding Product.Description}"/>
            <TextBlock Text="Цена"/>
            <TextBox x:Name="PriceTextBox" 
                 Text="{Binding Product.Price}"
                 PreviewTextInput="PriceTextBox_PreviewTextInput">
            </TextBox>
            <TextBlock Text="Скидка"/>
            <TextBox x:Name="DiscountTextBox"
                 Text="{Binding Product.Discount}"
                 PreviewTextInput="DiscountTextBox_PreviewTextInput"/>
            <TextBlock Text="Количество на складе"/>
            <TextBox x:Name="QuantityTextBox"
                 Text="{Binding Product.StoredQuantity}"
                 PreviewTextInput="QuantityTextBox_PreviewTextInput"/>
            <TextBlock Text="Единица измерения"/>
            <!--ItemsSource - привязка источника данных; SelectedItem - привязка выбранного элемента-->
            <ComboBox ItemsSource="{Binding Units}"
                  SelectedItem="{Binding SelectedUnit}"
                  DisplayMemberPath="Name"/>
            <TextBlock Text="Категория"/>
            <ComboBox ItemsSource="{Binding Categories}"
                  SelectedItem="{Binding SelectedCategory}"
                  DisplayMemberPath="Name"/>
            <TextBlock Text="Поставщик"/>
            <ComboBox ItemsSource="{Binding Suppliers}"
                  SelectedItem="{Binding SelectedSupplier}"
                  DisplayMemberPath="Name"/>
            <TextBlock Text="Производитель"/>
            <ComboBox ItemsSource="{Binding Manufacturers}"
                  SelectedItem="{Binding SelectedManufacturer}"
                  DisplayMemberPath="Name"/>
            <Image Source="{Binding ImageSource}"
               Width="200"
               Height="200"/>
            <StackPanel Orientation="Horizontal" Margin="5px">
                <!--Mode=OneWay - данные идут только из источниак (ViewModel)-->
                <TextBox Text="{Binding ImagePath, Mode=OneWay}" 
                                 IsReadOnly="True"
                                 Width="250"
                                 VerticalAlignment="Center"/>
                <Button Command="{Binding SetImageCommand}" 
                                Content="Выбрать" 
                                Width="60"/>
                <Button Command="{Binding ClearImageCommand}" 
                                Content="Очистить" 
                                Width="60"/>
            </StackPanel>

            <!--биндинг к Visibility нужен для реализации открытия страницы в разных режимах-->
            <Button Command="{Binding AddCommand}" Visibility="{Binding AddButtonVisibilityType}" Content="Добавить"/>
            <Button Command="{Binding ChangeCommand}" Visibility="{Binding ChangeButtonVisibilityType}" Content="Изменить"/>
        </StackPanel>
    </ScrollViewer>
</Page>
